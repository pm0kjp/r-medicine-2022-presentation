<!DOCTYPE html>
<html lang="en"><head>
<script src="RMedicine2022_files/libs/clipboard/clipboard.min.js"></script>
<script src="RMedicine2022_files/libs/quarto-html/tabby.min.js"></script>
<script src="RMedicine2022_files/libs/quarto-html/popper.min.js"></script>
<script src="RMedicine2022_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="RMedicine2022_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="RMedicine2022_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="RMedicine2022_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.0.36">

  <meta name="author" content="Joy Payton">
  <title>Using Public Data and Maps for Powerful Data Visualizations</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="RMedicine2022_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="RMedicine2022_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="RMedicine2022_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="RMedicine2022_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="RMedicine2022_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="RMedicine2022_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="RMedicine2022_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="center">
  <h1 class="title">Using Public Data and Maps for Powerful Data Visualizations</h1>
  <p class="author">Joy Payton</p>
</section>

<section>
<section id="about-this-session" class="title-slide slide level1 smaller center">
<h1>About This Session</h1>

</section>
<section id="whats-the-point" class="slide level2 smaller">
<h2>What’s the Point?</h2>
<p>These are the assumptions I am basing this workshop on:</p>
<ul>
<li>Geospatial data is useful to clinicians and biomed researchers</li>
<li>Neighborhood data is useful to clinicians and biomed researchers</li>
<li>Maps are great ways to share findings with all kinds of stakeholders</li>
<li>You can do a geospatial project just in R</li>
</ul>
</section>
<section id="itinerary" class="slide level2 smaller">
<h2>Itinerary</h2>
<p>Please follow along at <a href="https://rpubs.com/pm0kjp/r_medicine_2022" class="uri">https://rpubs.com/pm0kjp/r_medicine_2022</a>. I include links here you’ll want to click!</p>
<ul>
<li>Section 1: APIs</li>
<li>Section 2: Socrata public data portals</li>
<li>Break / Q&amp;A</li>
<li>Section 3: Maps and geospatial data</li>
<li>Section 4: US Census Data</li>
<li>Break / Q&amp;A</li>
<li>Section 5 (if time permits): Non-Socrata public data portals</li>
<li>Q&amp;A / Next Steps</li>
</ul>
<aside class="notes">
<p>The Census section is strongly USA-centric, but the rest is globally applicable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="about-your-instructor" class="slide level2 smaller">
<h2>About Your Instructor</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Joy Payton (she/her) is…</p>
<ul>
<li>Data Scientist</li>
<li>Data Educator (so I know a little about a lot)</li>
<li>Research Reproducibility Advocate</li>
<li>Census Nerd (first job after undergrad!)</li>
<li>Map Fan</li>
<li>Political Junkie</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="media/joy_payton.jpg"></p>
</div>
</div>
</section>
<section id="about-your-instructor-1" class="slide level2 smaller">
<h2>About Your Instructor</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Joy Payton (she/her) is NOT …</p>
<ul>
<li>GIS Wizard</li>
<li>Demographer</li>
<li>Physician</li>
<li>Statistician</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="media/joy_payton.jpg"></p>
</div>
</div>
</section>
<section id="you-can-reach-me" class="slide level2 smaller">
<h2>You Can Reach Me…</h2>
<ul>
<li>On LinkedIn (<a href="https://www.linkedin.com/in/joypayton/" class="uri">https://www.linkedin.com/in/joypayton/</a>)</li>
<li>By making an issue on the repo for this presentation (<a href="https://github.com/pm0kjp/r-medicine-2022/issues" class="uri">https://github.com/pm0kjp/r-medicine-2022/issues</a>)</li>
<li>By using my CHOP email address which is paytonk [at] CHOP [dot] edu</li>
</ul>
</section></section>
<section>
<section id="section-1-apis" class="title-slide slide level1 smaller center">
<h1>Section 1: APIs</h1>
<p>What are APIs and why do they matter? We’ll be talking about the Census API, the SODA API, and other API endpoints in this session, so a short intro to APIs is in order.</p>
</section>
<section id="first-a-bit-of-setup" class="slide level2 smaller">
<h2>First, a Bit of Setup</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>First, let’s start by having you clone the materials for the workshop to your own computer. When we start using APIs you’ll want this!</p>
<ul>
<li>Go to <a href="https://github.com/pm0kjp/r-medicine-2022/" class="uri">https://github.com/pm0kjp/r-medicine-2022/</a> and click on the green “Code” button to either:</li>
<li>Clone the repository (if you already use git, you know how this works) or</li>
<li>Download the zipped contents (if you’re not a git user)</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="media/github_code_button.png"></p>
</div>
</div>
</section>
<section id="first-a-bit-of-setup-1" class="slide level2 smaller">
<h2>First, a Bit of Setup</h2>
<p>Once you have these files downloaded, you will notice the following file structure:</p>
<pre><code>./
├── 📁 data
├── 📁 scripts
├── .gitattributes
├── .gitignore
└── README.md</code></pre>
<p>Please <strong>add</strong> a folder called <code>private</code> at the same level as <code>data</code> and <code>scripts</code>, so that it looks like this. You’ll add API keys, unique to you, to your own <code>private</code> directory.</p>
<pre><code>./
├── 📁 data
├── 📁 private
├── 📁 scripts
├── .gitattributes
├── .gitignore
└── README.md</code></pre>
</section>
<section id="what-is-an-api" class="slide level2 smaller">
<h2>What is an API?</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><strong><em>API</em></strong> stands for <strong><em>Application Programming Interface</em></strong>. It’s a way for people or computers to interact with software in a prescribed way. A common type of Web API is based on the REST architecture and are often referred to as “RESTful APIs”.</p>
<p>A RESTful API promotes a “resource-oriented” API where URLs (web addresses) map to objects or resources that you can then interact with (like .csvs of data).</p>
</div><div class="column" style="width:40%;">
<p><img data-src="media/nytimes_api.png"></p>
</div>
</div>
<aside class="notes">
<p>Here is a screenshot from one of the APIs provided by the New York Times. You can see here how the URL is used to describe what you might be looking for, like the bestsellers for a given date.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="why-use-an-api" class="slide level2 smaller">
<h2>Why Use an API?</h2>
<p>Why use APIs? They provide a structured, consistent way to carry out a process so that it can be <strong>automated</strong> and <strong>standardized</strong>. An API provides consistency around a process.</p>
<aside class="notes">
<p>So, why not just Google the NYT bestsellers from a given date and copy and paste that data from a web page? It seems simpler than learning an API.</p>
<p>Imagine two different people doing the exact same data download task using a manual approach. They will each have a different process for doing the task and likely a different result as well.</p>
<p>An API defines and requires a specific structure for input and provides a specific structure for the output.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="apis-mean-fresh-data" class="slide level2 smaller">
<h2>APIs Mean Fresh Data!</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>While many data-centric applications allow you to download data by using a form submission or clicking on buttons that save data to your computer, that might not be the most useful way to work with data in an ongoing way.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="media/pubmed_api.png"></p>
</div>
</div>
<aside class="notes">
<p>Especially if your data might change regularly, with more data being added, it’s probably smart to add a few lines to your code that get the latest data, instead of depending on a potentially stale CSV in a folder on your computer. Some of you might already be doing this in REDCap, for example!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-alternative-is-awful" class="slide level2 smaller">
<h2>The Alternative… is Awful</h2>
<p>Instructions:</p>
<ul>
<li>Go to https://fake.site/data …</li>
<li>Log in using the username:mike and password:mypassword</li>
<li>Make sure you’ve checked the following boxes in the data request page: …</li>
<li>Save the file with the following naming convention: …</li>
<li>Store the file in the sharefile folder within the directory called …</li>
</ul>
<aside class="notes">
<p>Using an API makes it easier to make a reproducible script that with the push of a button runs and does everything from obtaining data to analyzing it and creating data visualizations, instead of relying on an error-prone, human-executed punch list of instructions with manual steps like the ones on this slide!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="url-queries" class="slide level2 smaller">
<h2>URL Queries</h2>
<p>Consider this URL:</p>
<pre><code>https://www.amazon.com/s?k=r+for+data+science&amp;crid=1CZ68952YCOJU&amp;sprefix=r+for+data+sci%2Caps%2C143&amp;ref=nb_sb_ss_i\_1_14</code></pre>
<p>You may have seen long URLs like this one, which have question marks, equals signs, and ampersands. These long query strings generally give specific data – in this case, I’m asking for a specific book title, which I left in lower case: “r for data science”. Let’s take a look at this specific query string:</p>
<pre><code>?k=r+for+data+science&amp;crid=1CZ68952YCOJU&amp;sprefix=r+for+data+sci%2Caps%2C143&amp;ref=nb_sb_ss_i_1_14</code></pre>
</section>
<section id="query-strings" class="slide level2 smaller">
<h2>Query Strings</h2>
<pre><code>?k=r+for+data+science&amp;crid=1CZ68952YCOJU&amp;sprefix=r+for+data+sci%2Caps%2C143&amp;ref=nb_sb_ss_i_1_14</code></pre>
<p>These are the keys (variables, named data points) and values we see in the query string:</p>
<ul>
<li>“k”, which is equal to “r+for+data+science”</li>
<li>“crid” (maybe my customer ID?): “1CZ68952YCOJU”</li>
<li>“sprefix” (seems to reiterate the book title and a few other things): “r+for+data+sci%2Caps%2C143”</li>
<li>“ref”, which may be some code about my search history or how I got to this page: “nb_sb_ss_i_1_14”</li>
</ul>
</section>
<section id="query-strings-1" class="slide level2 smaller">
<h2>Query Strings</h2>
<pre><code>?k=r+for+data+science&amp;crid=1CZ68952YCOJU&amp;sprefix=r+for+data+sci%2Caps%2C143&amp;ref=nb_sb_ss_i_1_14</code></pre>
<p>You’ll notice that a query string starts with a <code>?</code> and is followed by key-value pairs with the format “key=value”. There are no spaces allowed, which is why URLs will use things like plus signs or <code>%20</code> to indicate spaces. Between key-value pairs, we add an ampersand (<code>&amp;</code>), and can string together many key-value pairs in this way.</p>
<aside class="notes">
<p>While some of the tools we’ll use today do that query string construction for you, it’s still important to know how URL-based API requests work.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exercise" class="slide level2 smaller">
<h2>Exercise</h2>
<p>Go to the materials for this course, the stuff you downloaded from the repository. In <code>scripts</code>, open the <code>pubmed_api_example.Rmd</code> file. Pubmed allows anonymous use of its API (no API key required), within certain limits.</p>
<p>Can’t / don’t want to do this code right now? Check out the rendered version at <a href="https://rpubs.com/pm0kjp/pubmed_api_example" class="uri">https://rpubs.com/pm0kjp/pubmed_api_example</a></p>
<aside class="notes">
<p>We’ll do an initial search (and feel free to try your own!), then do some keyword combining and run a bunch of API calls, throttled by a half second delay between each one.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="section-2-public-data-portals" class="title-slide slide level1 smaller center">
<h1>Section 2: Public Data Portals</h1>
<p>In this section we’ll delve a bit more into API usage, and give you some tips for navigating public data portals (by <strong>data portal</strong> here I mean a well designed website whose purpose is to give access to downloadable data using easy methods).</p>
<aside class="notes">
<p>Not <strong>all</strong> public data of interest is located in well-organized portals – you may need to scrape an HTML table from a webpage or download a fixed-width file from an FTP server, but today we’re going to stick to these use cases.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="public-data-portal" class="slide level2 smaller">
<h2>Public Data Portal</h2>
<p>The easiest way to find public data that’s relevant to you is to search for “Open Data” plus your search term, and look for sites that have “data” in the URL or name.</p>
<p>For example, let’s search for “open data gun violence new york city”. A few results show up:</p>

<img data-src="media/gun_violence_new_york.png" class="r-stretch"></section>
<section id="public-data-portal-1" class="slide level2 smaller">
<h2>Public Data Portal</h2>
<p>The first site has NYC gun violence data in the form of tables inside a pdf (not that helpful for us). The second site, which has “data” in the URL, is much more promising…</p>

<img data-src="media/gun_violence_new_york.png" class="r-stretch"></section>
<section id="nyc-open-data" class="slide level2 smaller">
<h2>NYC Open Data</h2>
<p>NYC Open Data is a particularly good open data resource. Still, it’s not perfect! The <a href="https://data.cityofnewyork.us/Public-Safety/NYC-crime/qb7u-rbmr">NYC Crime</a> dataset is a very small dataset of only 11 rows! Hmmmm….</p>
<p><img data-src="media/nyc_crime_small_data.png"></p>
<aside class="notes">
<p>A few things to notice here: This is a <em>community</em> provided view of data that’s based on a different product provided by NYPD. There’s also a ton of metadata here to help us understand more about the data at a glance. Finally, even the best data portals will have data that’s not useful, at least not to you!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="nyc-open-data-1" class="slide level2 smaller">
<h2>NYC Open Data</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>That small view stated that it comes from a <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243">much larger dataset</a>, the misnamed “NYPD Complaint Data Current (Year to Date)” which actually has crime data from 2019 forward.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="media/nyc_open_data_nypd.png"></p>
</div>
</div>
<aside class="notes">
<p>This is clearly a much larger dataset, and if I scroll down to preview it I can get a look at some of the rows. This data looks as though it’s up to date but the description and title are a bit misleading. This is another thing you’ll deal with when you’re sourcing data – incorrect or misleading metadata. This happens less in high quality data portals like New York’s, but as you can see it still does happen!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="nyc-open-data-2" class="slide level2 smaller">
<h2>NYC Open Data</h2>
<p>Let’s take a peek at the API button. This data is hosted in a Socrata-powered data portal, and uses the Socrata Open Data API, or SODA.</p>
<p><img data-src="media/api_button.png"></p>
<aside class="notes">
<p>Socrata is a company that specializes in public data portals like New York’s. Why is this API called “open”? Because it allows any user to download data without login credentials – it’s, well, open!</p>
<p>In our next practical exercise we’ll find interesting data available through the SODA API and I’ll have you download data using the API endpoint.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="socrata-api" class="slide level2 smaller">
<h2>Socrata API</h2>
<p>Because the Socrata Open Data API (SODA) is consistent across the many public data sources that employ it, we can learn some of the basic use cases once and be well-equipped to use the same methods in multiple places.</p>
<p>The Socrata Open Data API (SODA) uses URL query strings (also known as URL queries or URL parameters) to pass the data portal the details about what data you want.</p>
<aside class="notes">
<p>We’re going to start by using a Socrata data portal and then at the end of our workshop, if time permits, we’ll work with non-Socrata data to get some instincts for how to work with arbitrary APIs.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exercise-1" class="slide level2 smaller">
<h2>Exercise</h2>
<p>Let’s look at Socrata’s list of data portals. Find one that’s interesting to you!</p>
<p>Visit <a href="https://dev.socrata.com/data/" class="uri">https://dev.socrata.com/data/</a> and search for your region or area of interest. Then, when you find a likely dataset, click the API button to see more information about your dataset. Look at the columns – for our purposes today, you want to see some sort of geography, like the names of counties, geo-ids, fips codes, census tract identifiers, etc.</p>
<p><img data-src="media/iowa_overview.png"></p>
<aside class="notes">
<p>Here I searched for “child abuse” and I’m interested in this Iowa dataset, because it has geographic elements, in this case, the county the abuse occurred in. I can click the green API button to get more detail.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exercise-2" class="slide level2 smaller">
<h2>Exercise</h2>
<p>You may be presented interesting tips about how to work with SODA,</p>
<p>For example, here we read about SODA’s “Simple Filter” functionality, which provides very coarse-grained control that allows you to control what you import based on column name.</p>
<p>Check in the pink endpoint box in the upper right for the file types that are available. When you click there, you want to see, ideally, csv and geojson as options.</p>
<p><img data-src="media/iowa_details.png"></p>
<aside class="notes">
<p>There are features that SODA offers, like filters, paging, and throttling, which are fairly common across many APIs from lots of different data providers, whether that’s the NYT, NIH, or a government data portal. Socrata also offers its own flavor of SQL, SoQL which is unique to them.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exercise-3" class="slide level2">
<h2>Exercise</h2>
<p>If you don’t yet have a dataset you want to work with, please go to <a href="https://data.cityofnewyork.us/Public-Safety/NYC-crime/qb7u-rbmr" class="uri">https://data.cityofnewyork.us/Public-Safety/NYC-crime/qb7u-rbmr</a>, find the API button and give it a click.</p>
<p>If you have a dataset you want to work with, we’ll use that API endpoint instead.</p>
<aside class="notes">
<p>There are interesting help files on the API window that pops up, such as API documentation. It also gives you various file options, including JSON, CSV, and GeoJSON. For now, we’ll work with the CSV, but in a few minutes we can work with GeoJSON.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="quick-map-and-break" class="slide level2">
<h2>Quick Map and Break</h2>
<p>Without explaining how things work, let’s do a quick map of your data so you have an easy(-ish) win right away.</p>
<p>Open <code>scripts/simple_maps_from_socrata.Rmd</code>. Follow the instructions and feel free to surge ahead while I work with anyone having issues. This will lead into your break so do as little or as much as you want as far as riffing, trying new options, etc.</p>
<p>Rendered version available at <a href="https://rpubs.com/pm0kjp/simple_maps_from_socrata" class="uri">https://rpubs.com/pm0kjp/simple_maps_from_socrata</a></p>
</section></section>
<section>
<section id="section-3-maps-and-geospatial-data" class="title-slide slide level1 center">
<h1>Section 3: Maps and Geospatial Data</h1>
<p>In this section, we’re going to talk about several topics:</p>
<ul>
<li>Maps as a data visualization idiom</li>
<li>Geospatial data formats and files</li>
<li>Mapping with Leaflet</li>
</ul>
<aside class="notes">
<p>As an aside, mapping with Leaflet isn’t the only way to make maps in R, but it’s the way I’ll use here, because you can use leaflet in both R and Python, and in online resources like webpages or to make static maps for paper publications.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="map-as-idiom-example-1" class="slide level2">
<h2>Map as Idiom: Example 1</h2>
<p>What do you see in this reconstruction of a 12th century data visualization?</p>

<img data-src="media/map.jpeg" class="r-stretch quarto-figure-center"><p class="caption">al-Idrisi’s Tabula Rogeriana (Kitab Rujar)</p></section>
<section id="map-as-idiom-example-2" class="slide level2">
<h2>Map as Idiom: Example 2</h2>

<img data-src="media/1954_map.jpeg" class="r-stretch quarto-figure-center"><p class="caption">modern map of Okinawa</p></section>
<section id="elements-of-maps" class="slide level2">
<h2>Elements of Maps</h2>
<table>
<colgroup>
<col style="width: 16%">
<col style="width: 38%">
<col style="width: 29%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th>Shapes</th>
<th>Colors</th>
<th>Sizes</th>
<th>Language</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><ul>
<li><p>Points</p></li>
<li><p>Lines</p></li>
<li><p>Polygons</p></li>
</ul></td>
<td><ul>
<li><p>Hue (water is blue)</p></li>
<li><p>Intensity (e.g.&nbsp;water depth)</p></li>
</ul></td>
<td><ul>
<li><p>Thick / thin lines</p></li>
<li><p>Large / small points</p></li>
<li><p>Solid / broken lines</p></li>
</ul></td>
<td><ul>
<li><p>Scales</p></li>
<li><p>Numbers</p></li>
<li><p>Words</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
<section id="map-files" class="slide level2">
<h2>Map Files</h2>
<ul>
<li>GeoJSON (IETF Standard) https://tools.ietf.org/html/rfc7946 (usually one file)</li>
<li>Shapefile (ESRI standard) https://www.esri.com/library/whitepapers/pdfs/shapefile.pdf (usually multiple files in a .zip)</li>
</ul>
<p>Along with many folks (see, e.g.&nbsp;http://switchfromshapefile.org/) , I believe that geoJSON is a better format than Shapefile (but…)</p>
<aside class="notes">
<p>but this is mostly due to the fact that JSON itself is so well-understood and easy to work with, so it’s a simpler jump for me. Your needs may be different!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="but-wait-theres-more" class="slide level2">
<h2>But Wait, There’s More!</h2>
<p>There are other geospatial data types with smaller market share:</p>
<ul>
<li><a href="http://switchfromshapefile.org/#geopackage">OGC GeoPackage</a></li>
<li><a href="http://switchfromshapefile.org/#gml">OGC GML</a></li>
<li><a href="http://switchfromshapefile.org/#spatialite">SpatiaLite</a></li>
<li><a href="http://switchfromshapefile.org/#kml">OGC KML</a></li>
</ul>
</section>
<section id="whats-inside" class="slide level2">
<h2>What’s inside?</h2>
<p>Let’s look inside Shapefiles and GeoJSON… we’ll look inside the raw files and then we’ll use RGDAL (the R version of the Geographic Data Abstraction Library) to transform the files.</p>
</section>
<section id="exercise-4" class="slide level2">
<h2>Exercise</h2>
<p>Please open <code>scripts/opening_map_files.Rmd</code>. We’ll go through this together!</p>
</section></section>
<section>
<section id="section-4-us-census-data" class="title-slide slide level1 center">
<h1>Section 4: US Census Data</h1>

<img data-src="media/census_website.gif" class="r-stretch"></section>
<section id="decennial-census" class="slide level2 smaller">
<h2>Decennial Census</h2>
<p>The US Census Bureau is bound by the Constitution to do a <strong>full</strong> (not sampled) census of all people within the US every ten years. This determines the number of seats in the US House of Representatives and are used to draw district boundaries. This is the <em>Decennial Census</em>.</p>
<aside class="notes">
<p>Where in the Constitution? Article 1, Section 2.</p>
<p>For those of you outside the USA, your country probably has a populations statistics department or public demography ministry that does the same kinds of things.</p>
<p>If you are into math and/or data privacy, I encourage you to go down the rabbit hole of “differential privacy” as it relates to the decennial census. Although the US Census Bureau has to provide accurate statistics at the state level, it can and does blur data at lower levels of granularity, to preserve individual privacy. This can be problematic for small towns that rely on census data to know how to apportion funds.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="american-community-survey" class="slide level2 smaller">
<h2>American Community Survey</h2>
<p>In addition to the full population census, the Census Bureau is also responsible for conducting the <em>American Community Survey</em> (ACS) which uses sampling and inferential statistics to make estimates of social factors that affect your patients and research subjects… neighborhood characteristics like:</p>
<ul>
<li>Education levels, demographic characteristics</li>
<li>Poverty rates, mean and median income</li>
<li>Computer usage, housing characteristics</li>
<li>Crime, commuting, and much more!</li>
</ul>
</section>
<section id="versions-of-the-acs" class="slide level2 smaller">
<h2>Versions of the ACS</h2>
<p>Note that the ACS also has one and five year versions. Five year ACS data includes estimates for the entire country, while one year versions concentrate on population-dense areas and have smaller sample sizes.</p>
<aside class="notes">
<p>This means that if you’re doing analysis on, say, NYC, you can get very up-to-date (but less reliable) 1-year estimates, but if you’re interested in studying Iowa, or getting NYC estimates with a smaller margin of error, you’d be better off with a somewhat less current but broader and more reliable 5 year ACS. That’s what we’ll use today – five year ACS estimates.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="other-census-work" class="slide level2 smaller">
<h2>Other Census Work</h2>
<p>There are additional censuses performed by the Census Bureau that we won’t talk about, such as an <em>Economic Census</em> done every five years and the <em>Census of Governments</em> done every five years.</p>
</section>
<section id="geographies" class="slide level2 smaller">
<h2>Geographies</h2>
<p>Census data is collected at and aggregated to various levels:</p>
<ul>
<li>The country as a whole</li>
<li>States / territories</li>
<li>Counties</li>
<li>ZIP Code Tabulation Areas (approximations of ZIP Codes)</li>
<li>Urban areas</li>
<li>Census Tracts (1-8k people)</li>
<li>Census Block Groups</li>
<li>Census Blocks (600 - 3k people)</li>
<li>and probably more I’ve forgotten about!</li>
</ul>
<aside class="notes">
<p>Think about what kind of geographies are useful to you in your clinical practice or research. Maybe you want to show health disparities at the census tract level for your city, or show how different counties in your state are affected by opiod use disorder. Later we’ll use some census data in maps!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="census-website" class="slide level2 smaller">
<h2>Census Website</h2>
<p>The website of the Census Bureau (<a href="https://www.census.gov" class="uri">https://www.census.gov</a>) is a veritable treasure trove of information about what’s available and how to use Census data.</p>
<p>You can obtain data and download it in the Census Data browser at <a href="https://data.census.gov/" class="uri">https://data.census.gov/</a>. The tables you will find here are optimized for <strong>human readability</strong>, not always for processing via script.</p>
<aside class="notes">
<p>But using these human-optimized tables can give you an idea of what kind of data is available, the short name / encoding for variables, and give you access to notes about your data.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exercise-5" class="slide level2 smaller">
<h2>Exercise</h2>
<p>Let’s take a look at these two websites. Delve in to what’s available. How would this data be useful for you in your clinical practice or research?</p>
<ul>
<li><a href="https://www.census.gov" class="uri">https://www.census.gov</a></li>
<li><a href="https://data.census.gov/" class="uri">https://data.census.gov/</a></li>
</ul>
</section>
<section id="api-overview" class="slide level2 smaller">
<h2>API Overview</h2>
<p>This is what the <a href="https://www.census.gov/content/dam/Census/library/publications/2020/acs/acs_api_handbook_2020_ch02.pdf">Census Bureau says</a> about API usage:</p>
<blockquote>
<p>Any user may query small quantities of data with minimal restrictions (up to 50 variables in a single query, and up to 500 queries per IP address per day). However, more than 500 queries per IP address per day requires that you register for an API key.</p>
</blockquote>
<aside class="notes">
<p>Plan to work with Census Bureau data over and over again? It’s worth the time to use APIs instead of downloading data from the website manually.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="getting-an-api-key" class="slide level2 smaller">
<h2>Getting an API Key</h2>
<p>From the <a href="https://www.census.gov/content/dam/Census/library/publications/2020/acs/acs_api_handbook_2020_ch02.pdf">same source</a>:</p>
<blockquote>
<p>Once you have an API key, you can extract information from Census Bureau data sets using a variety of tools including JSON, R, Python, or even by typing a query string into the URL of a Web browser.</p>
</blockquote>
</section>
<section id="exercise-6" class="slide level2 smaller">
<h2>Exercise</h2>
<p>The Census Bureau offers <strong>free</strong> API credentials at <a href="https://api.census.gov/data/key_signup.html" class="uri">https://api.census.gov/data/key_signup.html</a></p>
<p><strong>Do that now.</strong></p>
<p><strong>We’ll wait.</strong></p>
<p>No, really, do that now, that way you can work on the practical sections!</p>
</section>
<section id="api-endpoints" class="slide level2 smaller">
<h2>API Endpoints</h2>
<p>Check out their <a href="https://www.census.gov/data/developers/data-sets.html">list of API endpoints</a>.</p>
<p><a href="https://cran.r-project.org/package=tidycensus"><code>tidycensus</code></a> is a package that helps you work with specific APIs offered by the Census Bureau.</p>
</section>
<section id="documentation" class="slide level2 smaller">
<h2>Documentation</h2>
<p>Great documentation in the <a href="https://www.census.gov/content/dam/Census/library/publications/2020/acs/acs_api_handbook_2020.pdf">ACS API Handbook</a></p>

<img data-src="media/api_documentation.png" class="r-stretch"></section>
<section id="fips" class="slide level2 smaller">
<h2>FIPS</h2>
<p>“FIPS” stands for “Federal Information Processing Standards”.</p>
<p>There are FIPS codes for states, counties, tracts, and blocks, and when concatenated, they end up being a single geographic id. Tracts and blocks can and will change from census to census!</p>
<aside class="notes">
<p>Often, when you talk to people, they’ll apply the term to whatever their particular federal data is… so, e.g., instead of “Census tract identifier” they’ll say “the FIPS”. It’s a term that therefore ends up having lots of meanings.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="fips-example" class="slide level2 smaller">
<h2>FIPS Example</h2>
<p>For example, FIPS state code for Pennsylvania is 42, the county code for Philadelphia is 101, and the census tract within Philadelphia where the University City campus of the Children’s Hospital of Philadelphia stands is 036901.</p>
<p>The last two digits can be thought of as ‘after the decimal point’, so this has a “human” name of Census Tract 369.01.</p>
<p>The block group for the hospital is 4, and the full block number is 4002, so you might be using a “GEOID” of 421010369014002 (if the block is included), or just 42101036901 (if you have tract level data only).</p>
</section>
<section id="granularity-of-data" class="slide level2 smaller">
<h2>Granularity of Data</h2>
<p>Census data is very very specific. If, for example, you’re interested in income data for a given tract, you might find columns that include descriptions like:</p>
<ul>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Total households - Less than $10,000</li>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Total households - $10,000 to $14,999</li>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Total households - $15,000 to $24,999</li>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Total households - $25,000 to $34,999</li>
<li>… and so on ..</li>
</ul>
</section>
<section id="granularity-of-data-1" class="slide level2 smaller">
<h2>Granularity of Data</h2>
<p>Or:</p>
<ul>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Families - Less than $10,000</li>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Families - $10,000 to $14,999</li>
<li>… and so on …</li>
</ul>
</section>
<section id="granularity-of-data-2" class="slide level2 smaller">
<h2>Granularity of Data</h2>
<p>Or:</p>
<ul>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - With Supplemental Security Income - Mean Supplemental Security Income (dollars)</li>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - With cash public assistance income - Mean cash public assistance income (dollars)</li>
<li>… and so on…</li>
</ul>
</section>
<section id="granularity-of-data-3" class="slide level2 smaller">
<h2>Granularity of Data</h2>
<p>Or:</p>
<ul>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Median earnings for workers (dollars)</li>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Median earnings for male full-time, year-round workers (dollars)</li>
<li>INCOME AND BENEFITS (IN 2020 INFLATION-ADJUSTED DOLLARS) - Median earnings for female full-time, year-round workers (dollars)</li>
</ul>
</section>
<section id="granularity-of-data-4" class="slide level2 smaller">
<h2>Granularity of Data</h2>
<p>You will likely need to do a bit of honing your question: families only, or all households (say, a single person, or a group home)? Do you want to look at statistics across the board or specify race, sex, or hispanicity? What is considered income, and what benefits? Do you want to include SSI? Measure it separately? What about welfare?</p>
</section>
<section id="estimates-and-moes" class="slide level2 smaller">
<h2>Estimates and MOEs</h2>
<p>You’ll also find, for any given measure, a few variables related to it:</p>
<ul>
<li>Estimate – used when a scalar count or value is needed, like median income or number of white women</li>
<li>Margin of error – used to indicate the precision of the estimate</li>
<li>Percent – used when a percent is needed, like percent of families below the poverty line</li>
<li>Percent Margin of Error – used to indicate the precision of the percent estimate</li>
</ul>
<p>Note that all four columns are generally present although only two make sense for any given measure!</p>
</section>
<section id="sparsity" class="slide level2 smaller">
<h2>Sparsity</h2>
<p>Every area of the US belongs to a census tract, even if it’s an area in which people don’t normally live (like a park or lake or airport). That’s why you might see census tracts with little to no data.</p>
<aside class="notes">
<p>Don’t panic if you see that a few tracts have very sparse data – they may be one of these special tracts.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exercise-7" class="slide level2 smaller">
<h2>Exercise</h2>
<p>Time to play with data! But first, check your email, then go to the materials for this course, the stuff you downloaded from the repository.</p>
<ul>
<li>Find the email with your Census API key</li>
<li>Add that to a new text file (you can make a new text file in RStudio or any text editor)</li>
<li>Save it in the <code>/private</code> directory you created earlier, as <code>census_api_key.txt</code></li>
</ul>
</section>
<section id="exercise-8" class="slide level2 smaller">
<h2>Exercise</h2>
<p>Now that you’ve stored your API key…</p>
<p>Go to the materials for this course, the stuff you downloaded from the repository. Open <code>/scripts/census_data.Rmd</code>. Rendered at <a href="https://rpubs.com/pm0kjp/census_data" class="uri">https://rpubs.com/pm0kjp/census_data</a>.</p>
<p>(Feeling fancy? It might be a good idea to start a Project using the top level directory as the location…)</p>
</section>
<section id="exercise-9" class="slide level2 smaller">
<h2>Exercise</h2>
<p>You probably have to install some things. RStudio may have already alerted you to this. Alternatively, uncomment and run line 15 of <code>census_data.Rmd</code>. You can skip most of the verbiage in the next few sections, it’s the stuff I’ve already explained.</p>
<p>Don’t want to / can’t run the code right now but don’t want to miss out? Here’s the knitted version: <a href="https://rpubs.com/pm0kjp/census_data" class="uri">https://rpubs.com/pm0kjp/census_data</a></p>
<aside class="notes">
<p>Scroll all the way down to the chunk titled “key_setting” around line 140, where we’ll pick up your census key. You <strong>did</strong> save it, right? Then, run the blocks one at a time, pausing to note what each one does and how you might choose something different as an example. I’ll be working on this with you but you may want to tune me out and do your own thing, which is fine.</p>
<p>Experiment some! This will lead into our Break / Q&amp;A time, so govern your time as you see fit.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="section-5-other-data-portals" class="title-slide slide level1 center">
<h1>Section 5: Other Data Portals</h1>
<p>Only if time permits: consider <a href="https://www.opendataphilly.org/" class="uri">https://www.opendataphilly.org/</a> . It’s not a Socrata-powered portal. However, it’s easy enough to figure out what the endpoints are for downloading data if you click around enough.</p>
</section>
<section id="exercise-10" class="slide level2">
<h2>Exercise</h2>
<p>In <a href="https://www.opendataphilly.org/" class="uri">https://www.opendataphilly.org/</a> or your non-Socrata data portal of choice, find a data endpoint you’re interested in. How can you figure out a download link that looks like an API call (the URL will refer to a specific resource, perhaps with a query string)?</p>
<p>Try to download and work with this file in a new R Markdown file.</p>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="RMedicine2022_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="RMedicine2022_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="RMedicine2022_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="RMedicine2022_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="RMedicine2022_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="RMedicine2022_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="RMedicine2022_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="RMedicine2022_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="RMedicine2022_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="RMedicine2022_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          let href = ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>